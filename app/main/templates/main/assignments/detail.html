{% extends "base.html" %} {% block title %}{{ assignment.title }}{% endblock %}
{% block content %}
<div class="container mt-5">
  {#Nav breadcrumb#}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb mb-2">
      <li class="breadcrumb-item">
        <a href="{{ url_for('main.index') }}">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{{ url_for('main.list_assignments') }}">Assignments</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Assignment Details
      </li>
    </ol>
  </nav>
  <div class="row mb-4">
    <div class="col-md-8">
      {#Assignment title#}
      <h1>{{ assignment.title }}</h1>
      <small class="text-muted">
        Created by <strong>{{ assignment.instructor.username }}</strong> on {{
        assignment.created_at.strftime('%Y-%m-%d %H:%M') }}
      </small>
    </div>

    <div class="col-md-4 text-end">
      {#Edit and delete buttons for the instructor who created the assignment#}
      {% if current_user.is_authenticated and current_user.id ==
      assignment.instructor_id %}
      <a
        href="{{ url_for('main.edit_assignment', id=assignment.id) }}"
        class="btn btn-warning me-2"
        style="display: inline"
      >
        Edit
      </a>

      <form
        method="POST"
        action="{{ url_for('main.delete_assignment', id=assignment.id) }}"
        style="display: inline"
      >
        <button
          type="submit"
          class="btn btn-danger"
          onclick="return confirm('Are you sure you want to delete this assignment?');"
        >
          Delete
        </button>
      </form>
      {% endif %}
    </div>
  </div>
  {#Assignment Description#}
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Description</h5>
      <p class="card-text">{{ assignment.description }}</p>
    </div>
  </div>
  {#Back to assignment list button#}
  <div class="mt-4">
    {% if current_user.is_authenticated and current_user.role == 'student' %}
      {% if student_submission %}
        <a class="btn btn-success" href="{{ url_for('main.submission_detail', id=student_submission.id) }}">View your Submission</a>
      {% else %}
        <a href="{{ url_for('main.submit_assignment', id=assignment.id) }}" class="btn btn-primary">Submit Assignment</a>
      {% endif %}
    {% endif %}

    {% if current_user.is_authenticated and current_user.role in ('teacher','ta') and current_user.id == assignment.instructor_id %}
    <a href="{{ url_for('main.list_submissions', id=assignment.id) }}" class="btn btn-outline-primary">View Submissions</a>
    {% endif %}

    <a href="{{ url_for('main.list_assignments') }}" class="btn btn-secondary">Back to Assignments</a>
  </div>
</div>
{% endblock %}
