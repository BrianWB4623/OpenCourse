{% extends "base.html" %} {% block title %}Course Materials{% endblock %} {%
block content %}
<div class="container mt-5">
  <div class="row mb-4">
    <div class="col-md-8">
      <h1>Course Materials</h1>
    </div>
    <div class="col-md-4 text-end">
      {% if current_user.is_authenticated and is_instructor(current_user)%}
      <a href="{{ url_for('main.create_material') }}" class="btn btn-primary"
        >+ Upload Material</a
      >
      {% endif %}
    </div>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div
    class="alert alert-{% if category == 'error' %}danger{% else %}success{% endif %} alert-dismissible fade show"
    role="alert"
  >
    {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {% endfor %} {% endif %} {% endwith %} {% if materials %}
  <div class="list-group">
    {% for material in materials %}
    <a
      href="{{ url_for('main.material_detail', id=material.id) }}"
      class="list-group-item list-group-item-action"
    >
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">{{ material.title }}</h5>
        <small>{{ material.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
      </div>
      <p class="mb-1">
        {{ material.description[:100] }}{% if material.description|length > 100
        %}...{% endif %}
      </p>
      <small class="text-muted">By: {{ material.instructor.username }}</small>
    </a>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info" role="alert">
    No materials found.
    <a href="{{ url_for('main.create_material') }}">Upload one</a>!
  </div>
  {% endif %}
</div>
{% endblock %}
