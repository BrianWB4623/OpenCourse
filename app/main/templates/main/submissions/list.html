{% extends "base.html" %}

{% block title %}Submissions for {{ assignment.title }}{% endblock %}

{% block content %}
<div class="container mt-5">
  <h1>Submissions: {{ assignment.title }}</h1>

  {% if submissions %}
    <ul class="list-group">
      {% for sub in submissions %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            <strong>{{ sub.assignment.title }}</strong> &mdash; by {{ sub.student.username }} at {{ sub.created_at.strftime('%Y-%m-%d %H:%M') }}
          </div>
          <div>
            <a href="{{ url_for('main.submission_detail', id=sub.id) }}" class="btn btn-sm btn-outline-primary">View</a>
            {% if current_user.id == sub.student_id %}
              <form method="POST" action="{{ url_for('main.delete_submission', id=sub.id) }}" style="display:inline;" onsubmit="return confirm('Delete your submission?');">
                <button class="btn btn-sm btn-outline-danger">Delete</button>
              </form>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info">No submissions yet.</div>
  {% endif %}

  <a href="{{ url_for('main.assignment_detail', id=assignment.id) }}" class="btn btn-secondary mt-3">Back</a>
</div>
{% endblock %}